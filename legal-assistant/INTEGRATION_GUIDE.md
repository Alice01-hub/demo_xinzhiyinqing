# 前后端集成使用指南

## 🎉 集成完成！

法律助手的前后端已经成功集成，现在可以进行真正的法律对话了！

## 🚀 启动步骤

### 1. 启动后端服务

```bash
cd legal-assistant-backend
python main.py
```

服务将在 http://localhost:8000 启动

### 2. 启动前端服务

```bash
cd legal-assistant
npm start
```

前端将在 http://localhost:3000 启动

## ✨ 功能特点

### 🤖 真实AI对话
- 前端聊天框现在直接调用后端API
- 使用通义千问大模型进行法律咨询
- 支持多轮对话和上下文理解

### 🧠 智能记忆
- 后端维护5轮对话历史
- 每次对话都包含上下文信息
- 提供连贯的法律咨询服务

### 🛡️ 错误处理
- 网络连接失败时的友好提示
- API调用错误的处理
- 服务不可用时的降级处理

## 🔧 技术实现

### 前端修改
- 添加了 `callBackendAPI` 函数
- 实现了真正的HTTP请求
- 移除了模拟回复功能
- 添加了完整的错误处理

### 后端服务
- FastAPI提供RESTful API
- 集成通义千问API
- 支持CORS跨域访问
- 完整的错误处理机制

## 📡 API接口

### 聊天接口
- **URL**: `POST http://localhost:8000/chat`
- **请求体**:
  ```json
  {
    "message": "用户消息",
    "user_id": "用户ID"
  }
  ```
- **响应**:
  ```json
  {
    "success": true,
    "message": "请求成功",
    "response": "AI回复内容",
    "request_id": "请求ID"
  }
  ```

## 🧪 测试方法

### 1. 后端API测试
```bash
cd legal-assistant-backend
python test_connection.py
```

### 2. 前端界面测试
1. 打开 http://localhost:3000
2. 在聊天框中输入法律问题
3. 查看AI回复

### 3. 多轮对话测试
1. 输入第一个问题
2. 等待AI回复
3. 输入相关问题（如"请详细解释"）
4. 观察AI是否能理解上下文

## 🐛 故障排除

### 后端服务无法启动
- 检查端口8000是否被占用
- 确认API密钥配置正确
- 查看控制台错误信息

### 前端无法连接后端
- 确认后端服务正在运行
- 检查CORS配置
- 查看浏览器控制台错误

### API调用失败
- 检查网络连接
- 确认API密钥有效
- 查看后端日志

## 🎯 使用建议

1. **法律问题咨询**：可以询问各种法律问题
2. **多轮对话**：可以基于之前的回答继续提问
3. **具体案例**：提供具体案例获得更准确的建议
4. **专业术语**：使用法律专业术语获得更好效果

## 📝 注意事项

- 确保后端服务始终运行
- 网络连接稳定
- API密钥有效
- 浏览器支持现代JavaScript特性

现在您可以享受真正的法律AI助手服务了！🎉
